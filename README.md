# Anchor: Your AI-Powered Productivity Companion

Anchor is a Chrome Extension designed to help you stay focused and productive by leveraging Google's Gemini AI. It allows you to break down tasks into actionable subtasks, utilize a Pomodoro timer, and detect distractions while you work.

---

## Table of Contents

- [Anchor: Your AI-Powered Productivity Companion](#anchor-your-ai-powered-productivity-companion)
  - [Table of Contents](#table-of-contents)
  - [Introduction](#introduction)
  - [Features](#features)
  - [Setup Guide](#setup-guide)
    - [Prerequisites](#prerequisites)
    - [Step 1: Download the Extension](#step-1-download-the-extension)
    - [Step 2: Load the Extension in Chrome](#step-2-load-the-extension-in-chrome)
    - [Step 3: Configure Your Gemini API Key](#step-3-configure-your-gemini-api-key)
    - [Step 4: Grant Notification Permissions](#step-4-grant-notification-permissions)
  - [How to Use](#how-to-use)
    - [Adding a New Task](#adding-a-new-task)
    - [Viewing Task Details \& Subtasks](#viewing-task-details--subtasks)
    - [Using the Pomodoro Timer \& Focus Mode](#using-the-pomodoro-timer--focus-mode)
    - [Distraction Detection](#distraction-detection)
    - [Clearing Tasks](#clearing-tasks)
  - [Troubleshooting](#troubleshooting)
  - [Contributing](#contributing)
  - [License](#license)

---

## Introduction

Anchor helps you anchor your focus! It integrates with Google's Gemini 2.5 Flash API to intelligently break down your tasks into manageable subtasks. Beyond task management, it features a Pomodoro timer for structured work sessions and a distraction detection system that gently nudges you back to your task if you wander off.

---

## Features

* **AI-Powered Task Breakdown:** Get actionable subtasks and tips generated by Gemini AI for any task you add.
* **Pomodoro Timer:** Work in focused intervals (25 min work, 5 min break by default) with automated phase transitions.
* **Persistent Focus Mode:** Activate focus mode for a specific task, and the extension will monitor your browsing.
* **Distraction Detection:** Get redirected to a "distracted" page if you visit unrelated websites while in focus mode.
* **Native Notifications:** Receive desktop notifications when Pomodoro phases start or end.
* **Task Management:** Add, view, and clear your productivity tasks.

---

## Setup Guide

Follow these steps carefully to get Anchor up and running.

### Prerequisites

* **Google Chrome Browser:** Ensure you have the latest version of Google Chrome installed.
* **Gemini API Key:** You will need a Gemini API key from Google AI Studio. This is free to obtain for most usage tiers.

### Step 1: Download the Extension

1.  Obtain the extension files (e.g., as a `.zip` file from the project repository).
2.  Unzip the downloaded file to a convenient location on your computer (e.g., a folder named `anchor-extension`). **Remember this folder's location!**

### Step 2: Load the Extension in Chrome

1.  Open Google Chrome.
2.  Navigate to the Extensions page by typing `chrome://extensions` in the address bar and pressing Enter.
3.  In the top right corner, toggle on **"Developer mode"**.
4.  Click the **"Load unpacked"** button that appears.
5.  Browse to and select the folder where you unzipped the extension files (e.g., `anchor-extension`).
6.  The Anchor extension should now appear in your list of extensions. You might want to "pin" it to your toolbar for easy access (click the puzzle piece icon, then the pin next to Anchor).

### Step 3: Configure Your Gemini API Key

The Anchor extension uses the Gemini API to generate subtasks and detect distractions. For this to work, you need to provide your personal Gemini API Key. This key is stored locally on your browser and is not sent anywhere else.

1.  **Get Your Gemini API Key:**
    * Go to [Google AI Studio](https://aistudio.google.com/app/apikey).
    * Sign in with your Google Account.
    * Click on **"Create API key in new project"** (or select an existing project).
    * **Copy the generated API key string.** It will look something like `AIzaSyD...`.

2.  **Enter the API Key in Your Extension's Console:**
    * Go back to `chrome://extensions`.
    * Find the "Anchor" extension.
    * Below the extension's name, you'll see "Inspect views: **Service Worker**" (or "background page" if you're on an older manifest version). Click on this link. This will open the Developer Tools console for your extension's background script.
    * In the **Console** tab of the Developer Tools, paste the following command and press Enter:

        ```javascript
        chrome.storage.local.set({ apiKey: "YOUR_GEMINI_API_KEY_HERE" }, () => {
          console.log("Gemini API key saved in chrome.storage.local!");
        });
        ```
        **IMPORTANT:** Replace `"YOUR_GEMINI_API_KEY_HERE"` with the actual API key you copied from Google AI Studio, making sure to keep the quotation marks.

    * You should see `Gemini API key saved in chrome.storage.local!` in the console.
    * **Reload the Extension:** Go back to `chrome://extensions` and click the **"Reload"** button (circular arrow icon) for the Anchor extension. This is crucial for the extension to pick up the newly saved API key.

### Step 4: Grant Notification Permissions

The Pomodoro timer and distraction detection features use native desktop notifications. For these to work, you need to ensure notifications are enabled for Chrome and for the extension.

1.  **In Google Chrome Settings:**
    * Go to `chrome://settings/content/notifications`.
    * Ensure that "Sites can ask to send notifications" is selected.
    * Scroll down to the "Allowed to send notifications" section. Look for your extension (it will be listed by its ID, e.g., `chrome-extension://bnblejoacaiopppplnfbofdmeifbajbb`). Make sure it's set to **"Allow"**. If it's in the "Blocked" list, remove it.

2.  **In Your Operating System's Notification Settings:**
    * **Windows:**
        * Go to `Settings > System > Notifications & actions`.
        * Ensure "Get notifications from apps and other senders" is **On**.
        * Find "Google Chrome" in the list of senders and ensure its notifications are **On**.
        * Check "Focus assist" settings if you use them, as they can suppress notifications.
    * **macOS:**
        * Go to `System Settings` (or `System Preferences`) > `Notifications`.
        * Find "Google Chrome" in the application list.
        * Ensure "Allow Notifications" is checked.
        * Check "Focus" modes (e.g., Do Not Disturb) as they will temporarily suppress notifications.
    * **Linux (GNOME, KDE, etc.):**
        * Access your desktop environment's system settings for "Notifications" or "Alerts" and ensure Chrome is allowed to send notifications.

## How to Use

### Adding a New Task

1.  Click the Anchor extension icon in your Chrome toolbar.
2.  Click the **"Add a task"** button.
3.  Fill in the task name, description, due date (optional), and priority.
4.  Click **"Create Task"**. The extension will use Gemini AI to generate actionable subtasks and then take you to the task's detail page.

### Viewing Task Details & Subtasks

1.  From the extension popup, click on any task name in the list.
2.  You will see the task's full details, including the AI-generated actionable subtasks and tips.

### Using the Pomodoro Timer & Focus Mode

1.  On a task's detail page, click the **"Focus"** button.
2.  The Pomodoro timer (default 25 minutes work) will start for that task.
3.  **Distraction Detection will activate:** If you navigate to unrelated websites, the extension will redirect you to a "distracted" page.
4.  **Work Phase Ends:** After the work period, you'll receive a notification, and the timer will automatically switch to a break phase (default 5 minutes). During the break, **distraction detection is temporarily turned OFF**, allowing you to browse freely.
5.  **Break Phase Ends:** After the break, you'll receive another notification, and the timer will automatically restart a new work phase for the *same task*. **Distraction detection will turn back ON.**
6.  **To Manually Stop/Reset:** Click the **"Unfocus"** button on the task details page to stop the Pomodoro timer and deactivate distraction detection.

### Distraction Detection

* When in **Focus Mode** (after clicking "Focus" on a task), the extension monitors your active tab.
* If you visit a website deemed unrelated to your focused task (determined by Gemini AI), you will be redirected to a distraction warning page.
* Distraction detection is automatically paused during your Pomodoro break periods.

### Clearing Tasks

1.  From the extension popup, click the **"Clear all tasks"** button.
2.  A confirmation dialog will appear.
3.  Confirm to delete all tasks. **Your Gemini API Key and Pomodoro/Focus settings will be preserved.**

## Troubleshooting

* **"API key not found in storage." or API calls failing:**
    * Ensure you followed [Step 3](#step-3-configure-your-gemini-api-key) exactly, including reloading the extension.
    * Double-check that you copied the API key correctly (no extra spaces).
    * Verify that the "Generative Language API" is enabled for your project in the [Google Cloud Console](https://console.cloud.google.com/apis/library/generativelanguage.googleapis.com).
* **"NaN:NaN" on Timer:**
    * This indicates a problem with the timer's start time. Reload your extension. If the issue persists, try unfocusing and refocusing on a task to reset the timer's internal state.
* **Notifications not appearing:**
    * Review [Step 4: Grant Notification Permissions](#step-4-grant-notification-permissions) carefully, checking both Chrome's internal settings and your operating system's settings.
    * Check the Service Worker console (`chrome://extensions` -> "service worker" link) for any errors when a Pomodoro phase should be ending.
* **"Refused to execute inline script..." error:**
    * This means you have JavaScript code directly embedded in an HTML file. All JavaScript in Manifest V3 Chrome Extensions must be in separate `.js` files linked via `<script src="...">`. Ensure your `distracted.html` (or any other HTML page) has its script moved to an external file.

## Contributing

(Optional: Add information on how others can contribute to your project, e.g., bug reports, feature requests, code contributions.)

## License

(Optional: Add your project's license information, e.g., MIT License.)

